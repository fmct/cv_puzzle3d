<!DOCTYPE html>

<html>

<head>
	
<title>Puzzle3D</title>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">


<!--
The simple vertex and fragment shaders.

Using a vertex coordinate buffer and a vertex colour buffer.

Passing the Model-View Matrix and the Projection Matrix. 
-->

<script id="shader-vs" type="x-shader/x-vertex">
	
    attribute vec3 aVertexPosition;

    attribute vec3 aVertexColor;
    
    uniform mat4 uMVMatrix;

    uniform mat4 uPMatrix;

    varying vec4 vertexColor;
    
    void main(void) {
		
		// To allow seeing the points drawn
		
		gl_PointSize = 5.0;
		
		// Just converting the (x,y,z) vertices to Homogeneous Coord.
		
		// And multiplying by the Projection and the Model-View matrix
		
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        
        // Converting the RGB color value to RGBA
        
        vertexColor = vec4(aVertexColor, 1.0);
    }
</script>

<!--
<script id="shader-fs" type="x-shader/x-fragment">

	precision mediump float;
	
	varying vec4 vertexColor;
	
	void main(void) {
		
		// Using the passed vertex color
		
		gl_FragColor = vertexColor;
	}
</script>-->

<script id="shader-vs" type="x-shader/x-vertex">
	    attribute vec3 aVertexPosition;

	    attribute vec3 aVertexColor;

	    uniform mat4 uMVMatrix;

	    uniform mat4 uPMatrix;

	    varying vec4 vertexColor;

	    void main(void) {
			// To allow seeing the points drawn

			gl_PointSize = 5.0;

	        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);

	        // Converting the RGB color value to RGBA

	        vertexColor = vec4(aVertexColor, 1.0);
	    }
</script>

<script id="shader-fs" type="x-shader/x-fragment">
	precision mediump float;

	varying vec4 vertexColor;

	void main(void) {

		// Using the passed vertex color

		gl_FragColor = vertexColor;
	}
</script>


<script id="shader-vsback" type="x-shader/x-vertex">
	attribute vec3 aVertexPosition;
	attribute vec2 aTextureCoord;

	uniform mat4 uMVMatrix;
	uniform mat4 uPMatrix;

	varying highp vec2 vTexCoord;	

	void main(void) {
	    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
	    vTexCoord = aTextureCoord;
	}

</script>

<script id="shader-fsback" type="x-shader/x-fragment">
	varying highp vec2 vTexCoord;

	uniform sampler2D uSampler;

	void main(void) {
	    gl_FragColor = texture2D(uSampler, vec2(vTexCoord.s, vTexCoord.t));
	}
</script>


<!-- The JS files -->

<!-- Some useful functions for browser compatibility -->

<script type="text/javascript" src="js/webgl-utils.js"></script>

<!-- Handling vectors and matrices -->

<script type="text/javascript" src="js/maths.js"></script>

<!-- Processing triangle mesh models -->

<script type="text/javascript" src="js/models.js"></script>

<!-- WebGL code -->

<script type="text/javascript" src="js/initShaders.js"></script>

<script type="text/javascript" src="js/Puzzle.js"></script>

<!-- Bootstrap Stuff -->
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<!-- -->

</head>

<body onload="runWebGL();">

	<div style="text-align: center">
		
		<h3>Puzzle3D</h3>

		<br/>

		<div class="container">
			<div class="row">
				<div class="col-lg-7 text-center">
					<canvas id="my-canvas" style="background: url('imgs/table.jpg')" style="border: 1px solid #E0E0E0; " width="512" height="512"></canvas>
				</div>

				<div class="col-lg-5">
					<div class="well">
						<h4>Controls</h4>
						<table align="center">
							<tr>
								<p>
								<button class="btn btn-primary" id="move-left-button"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
								<button class="btn btn-primary" id="move-right-button"><i class="fa fa-arrow-right" aria-hidden="true"></i></button>
								<button class="btn btn-primary" id="move-up-button"><i class="fa fa-arrow-up" aria-hidden="true"></i></button>
								<button class="btn btn-primary" id="move-down-button"><i class="fa fa-arrow-down" aria-hidden="true"></i></button>
								</p>
							</tr>
							<tr>
								<td>
									<button id="rotate-xx2-up" class="btn btn-warning"><strong>X</strong> <i class="fa fa-arrow-up" aria-hidden="true"></i></button>
									<button id="rotate-xx-up" class="btn btn-warning"><strong>X</strong> <i class="fa fa-arrow-up" aria-hidden="true"></i></button>
									<button id="rotate-xx-down" class="btn btn-warning"><strong>X</strong> <i class="fa fa-arrow-down" aria-hidden="true"></i></button>
									&nbsp;&nbsp;
								</td>
								<td>
									<button class="btn btn-danger" id="rotate-yy-right"><strong>Y</strong> <i class="fa fa-arrow-right" aria-hidden="true"></i></button>
									<button class="btn btn-danger" id="rotate-yy-left"><strong>Y</strong> <i class="fa fa-arrow-left" aria-hidden="true"></i></button>
									&nbsp;&nbsp;
								</td>
								<td>
									<button class="btn btn-info" id="rotate-zz-cw"><strong>Z</strong> <i class="fa fa-repeat" aria-hidden="true"></i></button>
									<button class="btn btn-info" id="rotate-zz-ccw"><strong>Z</strong> <i class="fa fa-undo" aria-hidden="true"></i></button>
								</td>
							</tr>
						</table>
						<p />

						<p>
							<button id="move-front-button">Move to Front</button>
	    					<button id="move-back-button">Move to Back</button>
						</p>

						<p>
							<h4>Reset: </h4>
							<button class="btn btn-danger" id="reset-button"><i class="fa fa-power-off"></i></button>
						</p>

						<p>
							<h4>Face-culling: </h4>
							<button class="btn btn-warning" id="face-culling-button" data-toggle="tooltip" data-placement="top" title="Back-Face Culling"><i class="fa fa-toggle-off"></i></button>
						</p>

						<p>
						  <!-- Trigger the modal with a button -->
						  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Help</button>

						  <!-- Modal -->
						  <div class="modal fade" id="myModal" role="dialog">
						    <div class="modal-dialog">
						    
						      <!-- Modal content-->
						      <div class="modal-content">
						        <div class="modal-header">
						          <button type="button" class="close" data-dismiss="modal">&times;</button>
						          <h4 class="modal-title">Help</h4>
						        </div>
						        <div class="modal-body">
						          <p>
						          	Escrever regras!!
						          </p>
						        </div>
						        <div class="modal-footer">
						          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						        </div>
						      </div>
						      
						    </div>
						  </div>
						</p>

					</div>
				</div>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	    <script type="text/javascript">
	      $(function () {
	        $('[data-toggle="tooltip"]').tooltip()
	      });
	      $("#face-culling-button").click(function(){
	        if($("#face-culling-button > i").attr("class") == "fa fa-toggle-on"){
	          $("#face-culling-button > i").attr("class", "fa fa-toggle-off");
	          $("#face-culling-button").attr("class", "btn btn-danger");
	        }else{
	          $("#face-culling-button > i").attr("class", "fa fa-toggle-on");
	          $("#face-culling-button").attr("class", "btn btn-success");
	        }
	      });
    	</script>

</body>

</html>
